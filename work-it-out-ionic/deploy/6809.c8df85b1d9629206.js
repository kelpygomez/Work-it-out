"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6809],{6809:(y,f,a)=>{a.r(f),a.d(f,{EditProfilePageModule:()=>x});var h=a(177),s=a(4341),d=a(9364),g=a(6766),u=a(8032),p=a.n(u),e=a(4438),P=a(5844);const b=()=>["/profile"],v=()=>({reload:!0});function m(t,n){if(1&t&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.JRh(r.validationErrors.birthdate)}}function E(t,n){if(1&t&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.JRh(r.validationErrors.weight)}}function M(t,n){if(1&t&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.R7$(),e.JRh(r.validationErrors.height)}}const C=[{path:"",component:(()=>{var t;class n{constructor(i){this.authService=i,this.profile={id:0,username:"",email:"",birthdate:"",height:0,weight:0,status:""},this.validationErrors={}}ngOnInit(){this.getUserId()}getUserId(){const i=this.authService.getToken();console.log("Token obtenido:",i),i?this.authService.getUserIdFromToken().subscribe(o=>{null!==o?(this.userId=o,console.log("User ID obtenido:",this.userId),this.loadProfile()):console.error("Error: User ID is null.")},o=>{console.error("Error fetching user ID from token:",o)}):console.error("Token not available.")}loadProfile(){this.userId?this.authService.getProfileData(this.userId).subscribe(i=>{this.profile=i,console.log("Profile loaded:",this.profile)},i=>{console.error("Error fetching profile:",i)}):console.error("User ID not available.")}isValidProfile(){this.validationErrors={};let i=!0;return/^\d{4}-\d{2}-\d{2}$/.test(this.profile.birthdate)||(this.validationErrors.birthdate="Birthdate must be in YYYY-MM-DD format (2000-09-01)",i=!1),this.profile.weight%1!=0&&(this.validationErrors.weight="Weight must not be decimal",i=!1),this.profile.height%1!=0&&(this.validationErrors.height="Height must not be decimal",i=!1),i}saveChanges(){this.isValidProfile()&&this.authService.updateProfile(this.profile).subscribe(()=>{p().fire({title:"Success!",text:"Your profile has been updated.",icon:"success",confirmButtonColor:"#1d965b"}),console.log("Changes saved successfully")},i=>{console.error("Error saving changes:",i)})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.rXU(P.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-edit-profile"]],decls:25,vars:17,consts:[[3,"fullscreen"],[1,"body"],[1,"container","mt-4","mb-4","p-3","d-flex","justify-content-center"],[1,"card","p-4"],[1,"image","d-flex","flex-column","justify-content-center","align-items-center"],["for","profile-birthdate"],["type","date","id","profile-birthdate","displayFormat","YYYY-MM-DD","placeholder","YYYY-MM-DD",3,"ngModelChange","ngModel"],["style","color: red;",4,"ngIf"],["for","profile-weight"],["type","text","id","profile-weight","placeholder","(no decimals)",3,"ngModelChange","ngModel"],["for","profile-height"],["type","text","id","profile-height","placeholder"," (in cm)",3,"ngModelChange","ngModel"],[1,"btn","btn-dark","btn-return-profile",3,"routerLink","queryParams"],["name","arrow-back"],[1,"btn","btn-save-changes",3,"click"],[2,"color","red"]],template:function(i,o){1&i&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"label",5),e.EFF(7,"Date of birth:"),e.k0s(),e.j41(8,"input",6),e.mxI("ngModelChange",function(l){return e.DH7(o.profile.birthdate,l)||(o.profile.birthdate=l),l}),e.k0s(),e.DNE(9,m,2,1,"div",7),e.k0s(),e.j41(10,"div")(11,"label",8),e.EFF(12,"Your weight:"),e.k0s(),e.j41(13,"input",9),e.mxI("ngModelChange",function(l){return e.DH7(o.profile.weight,l)||(o.profile.weight=l),l}),e.k0s(),e.DNE(14,E,2,1,"div",7),e.k0s(),e.j41(15,"div")(16,"label",10),e.EFF(17,"Your height:"),e.k0s(),e.j41(18,"input",11),e.mxI("ngModelChange",function(l){return e.DH7(o.profile.height,l)||(o.profile.height=l),l}),e.k0s(),e.DNE(19,M,2,1,"div",7),e.k0s()(),e.j41(20,"button",12),e.nrm(21,"ion-icon",13),e.EFF(22," Return to profile "),e.k0s(),e.j41(23,"button",14),e.bIt("click",function(){return o.saveChanges()}),e.EFF(24,"Save changes"),e.k0s()()()()()),2&i&&(e.Y8G("fullscreen",!0),e.R7$(8),e.xc7("border-color",o.validationErrors.birthdate?"red":""),e.R50("ngModel",o.profile.birthdate),e.R7$(),e.Y8G("ngIf",o.validationErrors.birthdate),e.R7$(4),e.xc7("border-color",o.validationErrors.weight?"red":""),e.R50("ngModel",o.profile.weight),e.R7$(),e.Y8G("ngIf",o.validationErrors.weight),e.R7$(4),e.xc7("border-color",o.validationErrors.height?"red":""),e.R50("ngModel",o.profile.height),e.R7$(),e.Y8G("ngIf",o.validationErrors.height),e.R7$(),e.Y8G("routerLink",e.lJ4(15,b))("queryParams",e.lJ4(16,v)))},dependencies:[h.bT,s.me,s.BC,s.vS,d.W9,d.iq,d.N7,g.Wk],styles:['@charset "UTF-8";.body[_ngcontent-%COMP%]{background-color:#fff;height:100vh}.card[_ngcontent-%COMP%]{background-color:#3d3c3d;border:none;transition:all .5s;width:100%;max-width:4000px;margin:100px auto 0;padding:20px;border-radius:0}.image[_ngcontent-%COMP%]{margin-top:50px}button[_ngcontent-%COMP%]{margin:20px}.btn-return-profile[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:silver;color:#3d3c3d}.btn-return-profile[_ngcontent-%COMP%]:hover{color:#fff}.btn-save-changes[_ngcontent-%COMP%]{width:20%;align-self:center;margin-top:20px;background-color:silver;color:#3d3c3d}.btn-save-changes[_ngcontent-%COMP%]:hover{color:#fff}input[type=text][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:20px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}input[type=text][_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%]:focus-visible{outline:none}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#f5f5f5;font-weight:700;text-align:center}']}),n})()}];let k=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(C),g.iI]}),n})(),x=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,s.YN,d.bv,k]}),n})()}}]);